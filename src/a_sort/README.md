# 排序算法总结

稳定性是指同样大小的样本再排序之后保持相对次序

> 相同大小的数排序之后顺序不变，或者学生先按年龄排序，再按年纪排序，有稳定性是指最终排序之后，1年级的学生是按年龄从小到大，2年级也是按年龄从小到大.....

- 对基础数据类型来说，稳定性毫无意义

- 对非基础数据 类型来说，稳定性有重要意义

- 有些排序算法可以实现成稳定的，而有些排序算法无论如何都实现不成稳定的

## 排序算法的稳定性

|                                 |           时间复杂度            |         额外空间复杂度          |             稳定性              |
| :-----------------------------: | :-----------------------------: | :-----------------------------: | :-----------------------------: |
|            选择排序             |             O(N^2)              |              O(1)               |               无                |
|            冒泡排序             |             O(N^2)              |              O(1)               |               有                |
|            插入排序             |             O(N^2)              |              O(1)               |               有                |
|            归并排序             |            O(N*logN)            |              O(N)               |               有                |
|            随机快排             |            O(N*logN)            |             O(logN)             |               无                |
|             堆排序              |            O(N*logN)            |              O(1)               |               无                |
| ------------------------------- | ------------------------------- | ------------------------------- | ------------------------------- |
|            计数排序             |              O(N)               |              O(M)               |               有                |
|            基数排序             |              O(N)               |              O(N)               |               有                |

## 排序算法总结

1. 不基于比较的排序算法，对样本数据有严格要求，不易改写

2. 基于比较的排序算法，只要规定好两个样本怎么比大小就可以直接复用

3. 基于比较的排序算法，时间复杂度的极限是 O(N*logN)

4. 时间复杂度O(N*logN)、额外空间复杂度低于O(N)、稳定、基于比较的排序是不存在的

5. **绝对速度选快排、绝对省空间选堆排、稳定性选归并**

## 排序算法常见的坑

- 归并排序的额外空间复杂度可以变成O(1)，用“归并排序 内部缓存法”，但是将变得不再稳定，不如堆排序

- “原地归并排序" 可以让空间复杂度变成O(1)，但是会让时间复杂度变成O(N^2) ，不如插入排序

- 快速排序稳定性可以改进成稳定的，“01 stable sort”，但是要限制样本数据量，不如桶排序

- 在整型数组中，请把奇数放在数组左边，偶数放在数组右边，要求所有奇数之间原始的相对次序不变，所有偶数之间原始相对次序不变，时间复杂度做到O(N)，额外空间复杂度做到O(1)

  > 类似快排 partition 过程，但是快排不稳定，因此实现不太可能了....

## 工程上对排序的改进

1. 稳定性的考虑
    - 按值传递直接用快排，按引用传递考虑稳定性用归并排序

2. 充分利用 O(N*logN) 和 O(N^2) 排序各自的优势，常数项更优